build:
  kots-lint:
    context: .
    dockerfile: ./okteto.Dockerfile
    args:
      - OKTETO_GIT_COMMIT=${OKTETO_GIT_COMMIT}

deploy:
  - cd kustomize/overlays/okteto && kustomize edit set image kots-lint=okteto.dev/kots-lint:${OKTETO_GIT_COMMIT}
  - kubectl apply -k kustomize/overlays/okteto

# dev:
#   name: kots-lint
#   command: bash
#   workdir: /go/src/github.com/replicatedhq/kots-lint
#   sync:
#     - .:/go/src/github.com/replicatedhq/kots-lint
#   resources:
#     limits:
#       cpu: "2"
#       memory: 4Gi
#   forward:
#     - 2354:2345

